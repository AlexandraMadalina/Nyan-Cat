<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <link rel="stylesheet" href="index.css">
  <title>Nyan Cat</title>
</head>

<body>

  <button type="button" name="button" id="doge">Doggo</button>

  <script type="text/javascript">
    // the text of the button will change after the page is loaded because the script is added at the end of the body
    document.getElementById("doge").innerHTML = "Woof!";;

    var button = document.getElementById("doge");
    //first we create the icon. The style properties are already set in css file
    let dogIcon = document.createElement("img");

    //then we add an addEventListener to the button and append the icon in to the button
    button.addEventListener("mouseenter", function() {

      dogIcon.src = "dogIcon.png";
      button.innerHTML = "";
      button.appendChild(dogIcon);
    });

    //for the button to go to it's original state after it was hovered, we add a 'mouseleave' event
    button.addEventListener("mouseleave", function() {
      button.innerHTML = "Woof!";
    });

    // to avoid adding more than one image when we click the button, we create and append the image before the 'click' event
    var dogImg = document.createElement("img");
    dogImg.src = "doge.png";
    dogImg.style.display = "none"; // we set the 'display' property to 'none' sodat it won't be visible until we click the button
    document.body.appendChild(dogImg);

    //on click, we switch between the 'display' values
    dogIcon.addEventListener("click", function() {

      if (dogImg.style.display == "none") {
        dogImg.style.display = "block";
      } else {
        dogImg.style.display = "none";
      }

    });


    dogImg.addEventListener("click", function() {



    var catImg = ["cat1.png", "cat2.png", "cat3.png", "cat4.png", "cat5.png"];


    var animation = setInterval(makeRain, 100);
    var sec = 0;


    function makeRain() {

      ++sec;

      if (sec >= 100) {
        clearInterval(animation);

      } else {
        var cat = new Image(100, 100);
        cat.src = catImg[Math.floor(Math.random() * 5)];
        cat.style.position = "absolute";

        let x = (Math.floor(Math.random() * 12) * 100) - 500;
        let y = (Math.floor(Math.random() * 2) + 1) * -100;

        cat.style.left = x + "px";
        cat.style.top = y + "px";
        var catContainer = document.getElementById('catContainer');
        document.body.appendChild(cat);

        var s = Math.floor(Math.random() * 3) * 10;

        var t = setInterval(rain, s);

        function rain() {
        if(sec>=100){
        cat.style.display = "none";
        clearInterval(rain);
      }else{
          var catImg = document.getElementById('cat');
          ++x;
          ++y;

          cat.style.left = x + 'px';
          cat.style.top = y + 'px';
        }

        }
      }
    }

    });
  </script>

</body>

</html>
